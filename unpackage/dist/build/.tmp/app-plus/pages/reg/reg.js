(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/reg/reg"],{2117:function(e,t,n){"use strict";var o,s=function(){var e=this,t=e.$createElement;e._self._c;e._isMounted||(e.e0=function(t){!e.safety.state&&e.fnGetPhoneCode()})},i=[];n.d(t,"b",function(){return s}),n.d(t,"c",function(){return i}),n.d(t,"a",function(){return o})},a372:function(e,t,n){"use strict";(function(e){n("daa0"),n("921b");o(n("66fd"));var t=o(n("ac13"));function o(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("6e42")["createPage"])},ac13:function(e,t,n){"use strict";n.r(t);var o=n("2117"),s=n("c0b6");for(var i in s)"default"!==i&&function(e){n.d(t,e,function(){return s[e]})}(i);n("b659");var r,a=n("f0c5"),c=Object(a["a"])(s["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],r);t["default"]=c.exports},b659:function(e,t,n){"use strict";var o=n("b82b"),s=n.n(o);s.a},b82b:function(e,t,n){},c0b6:function(e,t,n){"use strict";n.r(t);var o=n("c1f6"),s=n.n(o);for(var i in o)"default"!==i&&function(e){n.d(t,e,function(){return o[e]})}(i);t["default"]=s.a},c1f6:function(e,t,n){"use strict";(function(e,o){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=n("2f62"),i=r(n("f42b"));function r(e){return e&&e.__esModule?e:{default:e}}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){c(e,t,n[t])})}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=function(){return n.e("components/cmd-nav-bar/cmd-nav-bar").then(n.bind(null,"c3a4"))},l=function(){return n.e("components/cmd-page-body/cmd-page-body").then(n.bind(null,"45f9"))},f=function(){return n.e("components/cmd-transition/cmd-transition").then(n.bind(null,"be96"))},d=function(){return n.e("components/cmd-input/cmd-input").then(n.bind(null,"3ede"))},h={components:{cmdNavBar:u,cmdPageBody:l,cmdTransition:f,cmdInput:d},computed:a({},(0,s.mapState)(["serverUrl"])),data:function(){return{account:{username:"",password:""},usernameReg:/^[A-Za-z0-9]+$/,passwordReg:/^\w+$/,registerAccount:!1,mobile:{phone:"",code:""},phoneReg:/^[1](([3][0-9])|([4][5-9])|([5][0-3,5-9])|([6][5,6])|([7][0-8])|([8][0-9])|([9][1,8,9]))[0-9]{8}$/,registerMobile:!1,safety:{time:60,state:!1,interval:""},status:!0}},watch:{mobile:{handler:function(e){this.phoneReg.test(e.phone)&&6===e.code.length?this.registerMobile=!0:this.registerMobile=!1},deep:!0},account:{handler:function(e){this.usernameReg.test(e.username)&&e.username.length>=8&&this.passwordReg.test(e.password)&&e.password.length>=8?this.registerAccount=!0:this.registerAccount=!1},deep:!0}},methods:{gotoLogin:function(){e.navigateTo({url:"../login/login"})},fnRegister:function(){var t=this;if(this.status){console.log(o(JSON.stringify(this.mobile)," at pages\\reg\\reg.vue:140"));var n={};n.username=this.mobile.phone,n.password=this.mobile.code,n.phone=this.mobile.phone,e.request({url:this.serverUrl+"/user/register/"+this.mobile.code,method:"POST",data:n,header:{"content-type":"application/json"},success:function(n){n.data.status?(e.showToast({icon:"success",title:"成功"}),t.gotoLogin()):e.showToast({icon:"none",title:"注册失败"})},fail:function(t){e.showToast({icon:"none",title:"失败"})}})}else console.log(o(JSON.stringify(this.account)," at pages\\reg\\reg.vue:179"))},fnGetPhoneCode:function(){var t=this;if(this.phoneReg.test(this.mobile.phone)){var n={};n.url="/message/getYanzhengma/"+this.mobile.phone+"/register",i.default.get(n).then(function(n){e.showToast({icon:"none",title:"发送成功"}),t.safety.state=!0,t.safety.interval=setInterval(function(){t.safety.time--<=0&&(t.safety.time=60,t.safety.state=!1,clearInterval(t.safety.interval))},1e3)},function(t){e.showToast({title:"获取验证码失败",icon:"none"})})}else e.showToast({title:"手机号不正确",icon:"none"})},fnChangeStatus:function(){this.mobile={phone:"",code:""},this.registerAccount=!1,this.account={username:"",password:""},this.registerMobile=!1,clearInterval(this.safety.interval),this.safety.time=60,this.safety.state=!1,this.status=!this.status}},beforeDestroy:function(){clearInterval(this.safety.interval)}};t.default=h}).call(this,n("6e42")["default"],n("0de9")["default"])}},[["a372","common/runtime","common/vendor"]]]);